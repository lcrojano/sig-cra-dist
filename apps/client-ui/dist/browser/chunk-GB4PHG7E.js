import{d as L}from"./chunk-HIMNRRUG.js";import{B as S,Ib as x,Ka as N,M as w,Mb as B,Wa as A,X as T,b as O,c as I,d as j,f as y,fc as V,h as P,i as D,o as K,rb as $,x as l,y as R}from"./chunk-UTWBPGI3.js";import{Zb as k,ib as v}from"./chunk-YM5U3RH6.js";import{a as p,b as E,f as r,g as h}from"./chunk-4X66MCCG.js";var s=new Array(256).fill("").map((t,n)=>("0"+n.toString(16)).slice(-2));function W(){let[t,n,a,e]=crypto.getRandomValues(new Uint32Array(4));return"e"+s[t>>0&255]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+s[n>>0&255]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]+s[a>>0&255]+s[a>>8&255]+s[a>>16&255]+s[a>>24&255]+s[e>>0&255]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]}function _(t,n){let a=t.extraPlugins||[];return E(p({},t),{extraPlugins:[...a,...n.filter(e=>!a.includes(e))]})}function M(t){return!!t&&/^\d+\.\d+\.\d+/.test(t)}function F(t){return t?["nightly","alpha","internal","nightly-","staging"].some(n=>t.includes(n)):!1}function q(t){return M(t)||F(t)}function H(t){if(!M(t))throw new Error(`Invalid semantic version: ${t||"<blank>"}.`);let[n,a,e]=t.split(".");return{major:Number.parseInt(n,10),minor:Number.parseInt(a,10),patch:Number.parseInt(e,10)}}function z(t){if(F(t))return 3;let{major:n}=H(t);switch(!0){case n>=44:return 3;case n>=38:return 2;default:return 1}}function G(){let{CKEDITOR_VERSION:t,CKEDITOR:n}=window;return q(t)?{source:n?"cdn":"npm",version:t}:null}function Y(){let t=G();return t?z(t.version):null}function b(t,n){switch(n||=Y()||void 0,n){case 1:case 2:return t===void 0;case 3:return t==="GPL";default:return!1}}function U(t,n){return function(e){b(e.config.get("licenseKey"))||e.on("collectUsageData",(i,{setUsageData:c})=>{c(`integration.${t}`,n)})}}function X(t,n){}var Q=U("angular",{version:"9.1.0",frameworkVersion:A.full});function ee(t){let n=[];return b(t.licenseKey)||n.push(Q),_(t,n)}var C="Lock from Angular integration (@ckeditor/ckeditor5-angular)",me=(()=>{let n=class n{constructor(e,i){r(this,"elementRef");r(this,"editor");r(this,"config",{});r(this,"data","");r(this,"tagName","div");r(this,"watchdog");r(this,"editorWatchdogConfig");r(this,"disableTwoWayDataBinding",!1);r(this,"ready",new l);r(this,"change",new l);r(this,"blur",new l);r(this,"focus",new l);r(this,"error",new l);r(this,"editorWatchdog");r(this,"initiallyDisabled",!1);r(this,"ngZone");r(this,"cvaOnChange");r(this,"cvaOnTouched");r(this,"editorElement");r(this,"isEditorSettingData",!1);r(this,"id",W());this.ngZone=i,this.elementRef=e,this.checkVersion()}set disabled(e){this.setDisabledState(e)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let e=this.editorWatchdog;return this.watchdog&&(e=this.watchdog._watchdogs.get(this.id)),e?e.editor:null}getId(){return this.id}checkVersion(){let{CKEDITOR_VERSION:e}=window;if(!e)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');let[i]=e.split(".").map(Number);i>=42||e.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}ngOnChanges(e){Object.prototype.hasOwnProperty.call(e,"data")&&e.data&&!e.data.isFirstChange()&&this.writeValue(e.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return h(this,null,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(e){e===null&&(e=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(e),this.isEditorSettingData=!1):(this.data=e,this.ready.pipe(v()).subscribe(i=>{i.data.set(this.data)}))}registerOnChange(e){this.cvaOnChange=e}registerOnTouched(e){this.cvaOnTouched=e}setDisabledState(e){this.editorInstance&&(e?this.editorInstance.enableReadOnlyMode(C):this.editorInstance.disableReadOnlyMode(C)),this.initiallyDisabled=e}attachToWatchdog(){let e=(o,f)=>this.ngZone.runOutsideAngular(()=>h(this,null,function*(){this.elementRef.nativeElement.appendChild(o);let g=yield this.editor.create(o,f);return this.initiallyDisabled&&g.enableReadOnlyMode(C),this.ngZone.run(()=>{this.ready.emit(g)}),this.setUpEditorEvents(g),g})),i=o=>h(this,null,function*(){yield o.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),c=o=>{te(this.error)?this.ngZone.run(()=>this.error.emit(o)):console.error(o)},d=document.createElement(this.tagName),m=this.getConfig();if(this.editorElement=d,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:e,destructor:i,sourceElementOrData:d,config:m}).catch(o=>{c(o)}),this.watchdog.on("itemError",(o,{itemId:f})=>{f===this.id&&c()});else{let o=new this.editor.EditorWatchdog(this.editor,this.editorWatchdogConfig);o.setCreator(e),o.setDestructor(i),o.on("error",c),this.editorWatchdog=o,this.ngZone.runOutsideAngular(()=>{o.create(d,m).catch(f=>{c(f)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");let e=p({},this.config),i=this.config.initialData||this.data;return i&&(e.initialData=i),ee(e)}setUpEditorEvents(e){let i=e.model.document,c=e.editing.view.document;i.on("change:data",d=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){let m=e.data.get();this.cvaOnChange(m)}this.change.emit({event:d,editor:e})}})}),c.on("focus",d=>{this.ngZone.run(()=>{this.focus.emit({event:d,editor:e})})}),c.on("blur",d=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:d,editor:e})})})}};r(n,"\u0275fac",function(i){return new(i||n)(w(S),w(R))}),r(n,"\u0275cmp",P({type:n,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[N([{provide:B,useExisting:O(()=>n),multi:!0}]),K],decls:1,vars:0,template:function(i,c){i&1&&T(0,X,0,0,"ng-template")},encapsulation:2}));let t=n;return t})();function te(t){return t.observed||t.observers.length>0}var ge=(()=>{let n=class n{};r(n,"\u0275fac",function(i){return new(i||n)}),r(n,"\u0275mod",D({type:n})),r(n,"\u0275inj",j({imports:[V,$]}));let t=n;return t})();var u=class u{constructor(n,a){this._router=n;this._authService=a}canActivate(){return this._authService.isAuthenticatedOrRefresh().pipe(k(n=>{n||this._router.navigate(["auth/login"])}))}};r(u,"\u0275fac",function(a){return new(a||u)(y(x),y(L))}),r(u,"\u0275prov",I({token:u,factory:u.\u0275fac,providedIn:"root"}));var Z=u;export{me as a,ge as b,Z as c};
