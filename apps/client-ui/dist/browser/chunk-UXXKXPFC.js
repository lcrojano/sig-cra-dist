import{A as p,D as z,Ge as Y,Ie as tt,La as K,V as P,Xa as Q,aa as q,ba as Z,c as b,e as $,f as v,fe as X,g as d,gb as U,h as x,j as k,ja as B,mb as J,n as R,o as T,sb as H,t as _,w as N,xa as W,y as S,ya as V,za as G}from"./chunk-UTWBPGI3.js";import{Ca as l,H as D,I as F,Mb as E,Tb as w,V as c,Xb as M,Z as L,Zb as a,ba as j,i as f,n as I,o as C,pa as A}from"./chunk-YM5U3RH6.js";import{f as i}from"./chunk-4X66MCCG.js";function O(o){o||(R(O),o=d(N));let n=new f(e=>o.onDestroy(e.next.bind(e)));return e=>e.pipe(M(n))}var rt=["container"],et=new $("LottieOptions");function ot(){let o=d(S),{player:n,useWebWorker:e}=d(et),t=o.runOutsideAngular(()=>n());return(Q(t)?D(t).pipe(c(s=>s.default||s)):F(t)).pipe(a(s=>s.useWebWorker?.(e)),E({bufferSize:1,refCount:!0}))}var st=(()=>{let n=class n{constructor(){this.player$=ot().pipe(L(t=>at(this.ngZone).pipe(c(()=>t)))),this.ngZone=d(S)}loadAnimation(t){return this.player$.pipe(c(r=>this.createAnimationItem(r,t)))}resolveOptions(t,r){return Object.assign({container:r,renderer:"svg",loop:!0,autoplay:!0},t)}createAnimationItem(t,r){return this.ngZone.runOutsideAngular(()=>t.loadAnimation(r))}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function at(o){return new f(n=>{let e=o.runOutsideAngular(()=>requestAnimationFrame(()=>{n.next(),n.complete()}));return()=>cancelAnimationFrame(e)})}function Nt(o){return[{provide:et,useValue:o}]}var lt=(()=>{let n=class n{constructor(){this.options=p(null),this.containerClass=p(null),this.styles=p(null),this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.ngZone=d(S),this.isBrowser=H(d(z)),this.animationLoader=d(st),this.loadAnimation$=new I,this.animationItem$=new C(null),this.setupLoadAnimationListener()}ngOnDestroy(){this.destroyAnimation()}loadAnimation(t,r){this.ngZone.runOutsideAngular(()=>this.loadAnimation$.next([t,r]))}getAnimationItem(){return j(()=>this.animationItem$).pipe(A(t=>t!==null))}awaitAnimationItemAndStartListening(t){return this.getAnimationItem().pipe(w(r=>new f(s=>{this.ngZone.runOutsideAngular(()=>{r.addEventListener(t,y=>{this.ngZone.runOutsideAngular(()=>{s.next(y)})})})})))}setupLoadAnimationListener(){this.loadAnimation$.pipe(A(([r])=>this.isBrowser&&r.options!==void 0)).pipe(w(([r,s])=>(this.destroyAnimation(),this.animationLoader.loadAnimation(this.animationLoader.resolveOptions(r.options.currentValue,s)))),O()).subscribe(r=>{this.ngZone.run(()=>this.animationItem$.next(r))})}destroyAnimation(){let t=this.animationItem$.getValue();t!==null&&(t.destroy(),this.animationItem$.next(null))}};n.\u0275fac=function(r){return new(r||n)},n.\u0275dir=k({type:n,selectors:[["","lottie",""]],inputs:{options:[1,"options"],containerClass:[1,"containerClass"],styles:[1,"styles"]},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}});let o=n;return o})();var zt=(()=>{let n=class n extends lt{constructor(){super(...arguments),this.width=p(null),this.height=p(null),this.container=null}ngOnChanges(t){super.loadAnimation(t,this.container.nativeElement)}};n.\u0275fac=(()=>{let t;return function(s){return(t||(t=_(n)))(s||n)}})(),n.\u0275cmp=x({type:n,selectors:[["ng-lottie"]],viewQuery:function(r,s){if(r&1&&W(rt,7),r&2){let y;V(y=G())&&(s.container=y.first)}},inputs:{width:[1,"width"],height:[1,"height"]},standalone:!0,features:[P,T,K],decls:2,vars:6,consts:[["container",""],[3,"ngStyle","ngClass"]],template:function(r,s){r&1&&B(0,"div",1,0),r&2&&(Z("width",s.width()||"100%")("height",s.height()||"100%"),q("ngStyle",s.styles())("ngClass",s.containerClass()))},dependencies:[J,U],encapsulation:2,changeDetection:0});let o=n;return o})();var g=class{constructor(){i(this,"id");i(this,"station_id");i(this,"column_id");i(this,"file_path");i(this,"files_count");i(this,"icon");i(this,"name");i(this,"active");i(this,"created_at");i(this,"updated_at");i(this,"src");i(this,"caption");i(this,"thumb");i(this,"editing");i(this,"title");i(this,"desc")}deserialize(n){return n.file_path&&(n.src=n.file_path,n.thumb=n.file_path,n.caption="Imagen "+n.name),Object.assign(this,n),this}};var h=class o{constructor(){i(this,"glSource");i(this,"glLayers");i(this,"data");i(this,"source_name");i(this,"name");i(this,"latitude");i(this,"longitude");i(this,"state");i(this,"icon");i(this,"columns");i(this,"imgFiles");i(this,"otherFiles");i(this,"files");i(this,"id");i(this,"image");i(this,"isEditing");i(this,"type");i(this,"group");i(this,"desc")}deserialize(n){return n?(n.data&&n.data.map(e=>new o().deserialize(e)),Object.assign(this,n),this.imgFiles=n.imgFiles?.map(e=>new g().deserialize(e))??[],this.otherFiles=n.otherFiles?.map(e=>new g().deserialize(e))??[],this.files=n.files?.map(e=>new g().deserialize(e))??[],this):this}};var u={stations:"stations",rows:"stations/rows",files:"stations/files",groups:"stations/groups",types:"stations/types",report:o=>`stations/report/${o}`,station:o=>`stations/${o}`},m=class m extends Y{constructor(e,t){super(t);this._http=e}getAlltypes(){return this._http.get(u.types).pipe(a(e=>this.log("Fetched Stations Groups")),l(this.handleError("getAll",[])))}getOne(e){let t=typeof e=="number"?e:e.id,r=u.station(t);return this._http.get(r).pipe(a(s=>this.log(`get station id=${t}`)),l(this.handleError("get station eleteStation")),c(s=>new h().deserialize(s)))}addStation(e){return this._http.postFormData(u.stations,e,{reportProgress:!0,observe:"events"}).pipe(a(t=>this.log("create station ")))}deleteStation(e){let t=typeof e=="number"?e:e.id,r=u.station(t);return this._http.delete(r).pipe(a(s=>this.log(`deleted station id=${t}`)),l(this.handleError("deleteStation")))}getAll(){return this._http.get(u.stations).pipe(a(e=>this.log("Fetched Stations")),l(this.handleError("getAll",[])),c(e=>e.map(t=>new h().deserialize(t))))}getAllGroups(){return this._http.get(u.groups).pipe(a(e=>this.log("Fetched Stations Groups")),l(this.handleError("getAll",[])))}getRows(){return this._http.get(u.rows).pipe(a(e=>this.log("Fetched Stations")),l(this.handleError("getAllRows",[])),c(e=>e.map(t=>new h().deserialize(t))))}getFilesByColumns(){return this._http.get(u.stations).pipe(a(e=>this.log("Fetched Stations")),l(this.handleError("getAll",[])),c(e=>e.map(t=>new h().deserialize(t))))}updateStation(e){return this._http.put(u.station(e.id),e).pipe(a(()=>this.log(`updated station id=${e.id}`)),l(this.handleError("updateStations")))}uploadFiles(e){return this._http.postFormData(u.files,e,{reportProgress:!0,observe:"events"}).pipe(a(t=>this.log("files uploaded station ")),l(this.handleError("uploadFiles",e)))}donwloadPdf(e){let t=u.report(e);return this._http.get(t,{cache:!0,responseType:"blob"}).pipe(a(r=>this.log(`get station id=${e}`)),l(this.handleError("get station eleteStation")))}};i(m,"\u0275fac",function(t){return new(t||m)(v(tt),v(X))}),i(m,"\u0275prov",b({token:m,factory:m.\u0275fac,providedIn:"root"}));var nt=m;export{g as a,h as b,nt as c,Nt as d,zt as e};
