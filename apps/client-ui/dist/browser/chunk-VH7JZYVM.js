import{d as S,r as E,s as b,t as f}from"./chunk-HIMNRRUG.js";import{Ge as O,Ie as c,c as h,f as m,fe as y}from"./chunk-UTWBPGI3.js";import{Ca as t,I as d,J as v,V as n,Zb as o}from"./chunk-YM5U3RH6.js";import{f as s}from"./chunk-4X66MCCG.js";var l={roles:"roles",role:u=>`roles/${u}`,permissions:"permissions"},a=class a{constructor(e){this.http=e}getAll(){return this.http.get(l.roles).pipe(o(e=>this.log("Fetched Roles")),t(this.handleError("getAll",[])),n(e=>e.map(r=>new b().deserialize(r))))}log(e){}getSingle(e){return this.http.get(l.role(e)).pipe(n(r=>new b().deserialize(r)),t(()=>v("Role not found")))}updateRole(e){return this.http.put(l.role(e.id),e).pipe(o(r=>this.log(`updated role id=${e.id}`)),t(this.handleError("updateRoles")))}addRole(e){return this.http.post(l.roles,e).pipe(o(r=>this.log(`create role id=${e.id}`)),t(this.handleError("addRole")))}deleteRole(e){let r=typeof e=="number"?e:e.id,i=l.role(r);return this.http.delete(i).pipe(o(R=>this.log(`deleted role id=${r}`)),t(this.handleError("deleteRole")))}searchRoles(e){return e.trim()?this.http.get(`${l.roles}/?name=${e}`).pipe(o(r=>r.length?this.log(`found Roles matching "${e}"`):this.log(`no Roles matching "${e}"`)),t(this.handleError("searchRoles",[]))):d([])}getData(){}getSystemPermissions(){return this.http.get(l.permissions).pipe(o(e=>this.log("Fetched Permission")),t(this.handleError("getSystemPermissions",[])),n(e=>e.map(r=>new E().deserialize(r))))}handleError(e="operation",r){return i=>(console.error(i),this.log(`${e} failed: ${i.message}`),d(r))}};s(a,"\u0275fac",function(r){return new(r||a)(m(c))}),s(a,"\u0275prov",h({token:a,factory:a.\u0275fac,providedIn:"root"}));var A=a;var g={users:"users",usersByRole:"users/byrole",user:u=>`users/${u}`},p=class p extends O{constructor(r,i,R){super(R);this._http=r;this._authService=i;this._nbService=R;s(this,"time",new Date)}addUser(r){return this._http.postFormData(g.users,r,{reportProgress:!0,observe:"events"}).pipe(o(()=>this.log("create User ")))}getUsersByRole(){return this._http.get(g.usersByRole).pipe(o(()=>this.log("Fetched")),t(this.handleError("getUsersByRole",[])))}getSingle(r){return this._http.get(g.user(r)).pipe(t(this.handleError("getSingle",new f)),n(i=>new f().deserialize(i)))}};s(p,"\u0275fac",function(i){return new(i||p)(m(c),m(S),m(y))}),s(p,"\u0275prov",h({token:p,factory:p.\u0275fac}));var $=p;export{A as a,$ as b};
